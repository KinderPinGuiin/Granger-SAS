{% extends 'base.html.twig' %}

{% block title %}Profil - {{ user.prenom }} {{ user.nom }}{% endblock %}

{% block body %}
    {# Informations #}
    <h1>Profil de {{ user.prenom }} {{ user.nom }}</h1>
    {# Candidatures #}
    <section>
        <h2>Candidatures</h2>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Statut</th>
                    <th>Poste</th>
                </tr>
            </thead>
            <tbody>
                {% if candidatures|length > 0 %}                
                    {% for candidature in candidatures %}
                        <tr>
                            <td>{{ candidature.date|date("d/m/Y") }}</td>
                            <td>
                                {% if candidature.acceptee == true %} 
                                    Acceptée
                                {% elseif candidature.acceptee is null %} 
                                    En cours de traitement
                                {% elseif candidature.acceptee == false %} 
                                    Refusée
                                {% endif %}
                            </td>
                            <td>{{ candidature.poste.name }}</td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3">
                            Vous n'avez pas de candidature pour le moment
                            <a href="{{ path("upload") }}">Postuler</a>
                        </td>
                    </tr>
                {% endif %}
            
            </tbody>
        </table>
    </section>
    {# Modifier les informations #}
    <section>
        <h2>Modifier vos informations</h2>
        {% form_theme updateForm "forms/registration/register_form_template.html.twig" %}
        {{ form_start(updateForm) }}
            {{ form_row(updateForm.plainPassword.first, {
                "label": "Entrez un nouveau mot de passe",
                "required": false
            }) }}
            {{ form_row(updateForm.plainPassword.second, {
                "label": "Confirmez le nouveau mot de passe",
                "required": false
            }) }}
            {{ form_rest(updateForm) }}
            <input type="submit" value="Modifier" />
        {{ form_end(updateForm) }}
    </section>
    {# Bouton suppression #}
    <a href="{{ path("profil_delete") }}">Supprimer le compte</a>
{% endblock %}
